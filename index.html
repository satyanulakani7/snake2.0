<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cartoon Snake Game</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background: linear-gradient(to right, #00c3ff, #ffff1c);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }
    canvas {
      background: #222;
      border-radius: 16px;
      box-shadow: 0 0 20px #000;
    }
  </style>
</head>
<body>
  <canvas id="snake" width="400" height="400"></canvas>

  <script>
    const canvas = document.getElementById("snake");
    const ctx = canvas.getContext("2d");
    const box = 20;
    let score = 0;
    let snake = [{ x: 9, y: 10 }];
    let food = {
      x: Math.floor(Math.random() * 19),
      y: Math.floor(Math.random() * 19),
    };
    let d;

    document.addEventListener("keydown", direction);

    function direction(event) {
      if (event.key === "ArrowLeft" && d !== "RIGHT") d = "LEFT";
      else if (event.key === "ArrowUp" && d !== "DOWN") d = "UP";
      else if (event.key === "ArrowRight" && d !== "LEFT") d = "RIGHT";
      else if (event.key === "ArrowDown" && d !== "UP") d = "DOWN";
    }

    CanvasRenderingContext2D.prototype.roundRect = function (x, y, width, height, radius) {
      this.beginPath();
      this.moveTo(x + radius, y);
      this.lineTo(x + width - radius, y);
      this.quadraticCurveTo(x + width, y, x + width, y + radius);
      this.lineTo(x + width, y + height - radius);
      this.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
      this.lineTo(x + radius, y + height);
      this.quadraticCurveTo(x, y + height, x, y + height - radius);
      this.lineTo(x, y + radius);
      this.quadraticCurveTo(x, y, x + radius, y);
      this.closePath();
      return this;
    };

    function drawSnake() {
      for (let i = 0; i < snake.length; i++) {
        const s = snake[i];
        const x = s.x * box;
        const y = s.y * box;

        if (i === 0) {
          // Head
          ctx.fillStyle = "#ffcc00";
          ctx.strokeStyle = "#b8860b";
          ctx.lineWidth = 2;
          ctx.roundRect(x, y, box, box, 8).fill();
          ctx.stroke();

          // Eyes
          ctx.fillStyle = "#000";
          ctx.beginPath();
          ctx.arc(x + box * 0.25, y + box * 0.3, 2, 0, Math.PI * 2);
          ctx.arc(x + box * 0.75, y + box * 0.3, 2, 0, Math.PI * 2);
          ctx.fill();
        } else {
          // Body
          ctx.fillStyle = "#00ccff";
          ctx.strokeStyle = "#007799";
          ctx.lineWidth = 2;
          ctx.roundRect(x, y, box, box, 6).fill();
          ctx.stroke();
        }
      }
    }

    function drawFood() {
      ctx.fillStyle = "#ff4444";
      ctx.beginPath();
      ctx.arc(food.x * box + box / 2, food.y * box + box / 2, box / 2.5, 0, Math.PI * 2);
      ctx.fill();
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawSnake();
      drawFood();

      // New head position
      let headX = snake[0].x;
      let headY = snake[0].y;

      if (d === "LEFT") headX--;
      if (d === "UP") headY--;
      if (d === "RIGHT") headX++;
      if (d === "DOWN") headY++;

      // Game over conditions
      if (
        headX < 0 ||
        headY < 0 ||
        headX * box >= canvas.width ||
        headY * box >= canvas.height ||
        snake.some((s, i) => i !== 0 && s.x === headX && s.y === headY)
      ) {
        clearInterval(game);
        alert("Game Over! Score: " + score);
        location.reload();
      }

      // Food eaten
      let newHead = { x: headX, y: headY };
      if (headX === food.x && headY === food.y) {
        score++;
        food = {
          x: Math.floor(Math.random() * 19),
          y: Math.floor(Math.random() * 19),
        };
      } else {
        snake.pop();
      }

      snake.unshift(newHead);
    }

    const game = setInterval(draw, 100);

    // Prevent pull-to-refresh on mobile
    window.addEventListener("touchmove", function (e) {
      e.preventDefault();
    }, { passive: false });
  </script>
</body>
</html>
